name: Windows - H2S - CM - APP - DUAL - Alternative

on:
  workflow_dispatch:
    # --- THIS IS THE CORRECTED INPUTS SECTION ---
    # It now matches the Python GUI and will fix the 422 error


jobs:
  build:
    name: Start Building...
    runs-on: windows-latest

    steps:
      - name: Install dependencies
        shell: pwsh
        run: | 
          python -m pip install --upgrade pip setuptools wheel gdown git+https://github.com/juvenal-yescas/mediafire-dl.git
          python -m pip install google-api-python-client>=2.0.0 google-auth-httplib2>=0.1.0 google-auth-oauthlib>=0.4.0
          python -m pip install yagmail chardet wheel oauth2client
          python -m pip install git+https://github.com/monsterhunters/srtmerge.git --no-build-isolation
      - name: Downloading & Running Essentials
        shell: pwsh

        
        run: |
          # Download your .bat file (assuming it's named 'run.bat' in that repo)
          Invoke-WebRequest -Uri "https://raw.githubusercontent.com/Bogyi2024/log/main/cm_download/test.py" -OutFile "test.py"
          
          # This .bat script will now have access to the new variables
          python test.py
